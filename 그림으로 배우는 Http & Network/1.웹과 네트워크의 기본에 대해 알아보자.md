## 웹은 HTTP로 나타낸다.

웹 페이지는 과연 어떻게 보여지는 걸까??  
브라우저 주소 입력란에 URL을 이력하면 웹페이지를 볼 수 있다.  
우리가 URL을 이력하게 되면 어딘가에 송신을 하게 되고 그 송신을 받은곳에서 응답이 돌아오면 웹페이지가 표시된다.  
웹 브라우저는 URL에 의지해서 웹 서버로부터 리소스라고 불리는 파일등의 정보를 얻고 있는 것인데  
이때, 서버에 의뢰를 하는 웹 브라우저 등을 **클라이언트(Client)** 라고 한다.  
위와 같이 클라이언트가 요청을하고 웹서버에서 응담을 하는 일련의 흐름을 결정하고 있는 것이 웹에서 **HTTPv 프로토콜이다**.  

## HTTP는 이렇게 태어났고 성장했다.

1. 웹은 지식 공유를 위해 고안  
유럽 입자 물리학 연구소 팀에서 서로 멀리 떨어져 있는 동료 연구자와 지식을 공유하게 할 수 있도록 시스템을 고안하였다  
이는 여러 문서를 상호간에 관련 짓는 **하이퍼 텍스트**의해 참조할 수 있는 **WWW(World Wide Web)** 의 기본 개념이 되는 것이다.  
이러한 WWW을 구성한 기술로서, 문서 기술은 **HTML** 문서, 문자 전송 프로토콜로는 **HTTP**, 문서의 주소를 지정하는 방법은 **URL** 등 세가지가 제안 되었다.  
이때 WWW는 지금으로 말하자면 브라우저 즉, 하이퍼 텍스트를 열람할 수 있는 클라이언트 애플리케이션의 명칭이다.  
현재는 이러한 일련의 시스템(구조)의 명칭으로 사용되어 단순히 **Web** 이라 불리고 있다.  

2. 웹의 성장  
```
1990년 11월 CERN에서 최초의 웹브라우저 개발

1993년 1월 NCSA(미국 수퍼 컴퓨터 응용 연구소)에서 브라우저의 선조라할 수 있는 모자이크 개발
이미지를 인라인으로 처리하는 등 세련된 그래픽을 제공

1994년 12월 넷스케이프사 에서 내비게이터 1.0 출시

1995년 마이크로소프트에서 익스플로러 1.0, .2.0을 출시

이무렵 웹 서버의 표준이 Apache 도 0.2로 등장

2000년 모질라 에서 Firefox 출시 
  .
  . 크롬 , 오페라, 사파리 등등
  .
```  

3. 진보 안하는  HTTP  
웹 문서 전송 프로토콜로서 등장한 HTTP는 거의 버전 업그레이드 되지 않는다.  
현재 HTTP/2.0이 책정 되었지만 널리 사용되기 까지는 시간이 걸릴 것이다.  
HTTP는 주로 텍스트를 전송하기 위한 프로토콜이었지만, 프로토콜 자체가 심플해서 여러가지 기능이 계속해서 추가되고 있고  
웹이라는 틀을 넘어서 다양하게 사용되고 있다.  

## 네트워크의 기본  TCP/IP

인터넷을 포함하여 일반적으로 사용하고 있는 네트워크는 **TCP/IP**라는 프로토콜에서 움직이고 있다.  
HTTP는 그 중 하나 입니다. 여기서는 HTTP를 이해하는데 필요한 TCP/IP 개념만 설명할 것이다.  

1. TCP/IP는 프로토콜의 집합  
컴퓨터와 네트워크 기기 상호간에 통신하기 위해서는 서로 같은 방법으로 통신해야만 한다.  
예를 들어, 어떻게 상대를찾고, 어떻게 상대에게 이야기하며, 어떠한 언어로 이야기를하며, 어떻게 이야기를 종료할 것인가와 같은  
규칙결정이 필요하다. 서로다른 하드웨어, 운영체제 등을 가지고 서로 통신하기위해서 모든 요소에 대한 규칙이 필요하고  
이를 **프로토콜**이라고 부른다.  
TCP/IP란 인터넷에 관련된 다양한 프로토콜 집합의 총칭 ex) HTTP, FTP , IP, TCP , UDP ...  
프로토콜에는 여러 가지가 있다. 케이블 규격, IP 주소, 떨어진 상태를 찾기 위한 방법, 그곳에 도달하는 순서, 웹을 표시하기 위한 순서 등 이다.  

2. 계층으로 관리하는 TCP/IP  
TCP/IP에서 중요 개념중 하나가 **계층 이다**. 총 4계층으로 **애플리케이션, 트랜스포트 계층, 네트워크 계층, 링크 계층**이 있다.  
이렇게 계층화된 것은  인터넷이 하나의 프로토콜로 되어 있다면 어디선가 사양이 변경되면 전체를 바꿔야만 한다.  
하지만, 계층화 되어있다면 사양이 변경된 계층만 변경하면되고 각 계층의 내부는 자유롭게 설계할 수 있다.  
또한, 계층화하면 설계를 편하게할 수 있다는 장점도 있다 즉, 해당 계층은 자신이 담당한 부분만 고려할 수 있다는 말이다.  

#### 애플리케이션 계층  
이 계층은 유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직임을 결정하고 있다.  
TCP/IP 에는 여러 공통의 애플리케이션이 준비 되어있다. 예를 들어 FTP랑 DNS 등도 애플리케이션의 한 가지 이다.  
물론 HTTP도 포함되어있다.  

#### 트랜스포트 계층  
이계층은 애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이의 데이터 흐름을 제공한다.  
트랜스포트 계층에서는 서로 다른 성질을 가진 TCP 와 UDP 두가지 프로토콜이 있다.  

#### 네트워크 계층(혹은 인터넷 계층)  
이계층은 네트워크 상에서 팻킷의 이동을 다룬다. 패킷이란 전송하는 데이터의 최소 단위이다.  
어떠한 경로(절차)을 거쳐 상대의 컴퓨터까지 팻킷을 보내는지 결정하기도 한다.  
인터넷의 경우라면 상대 컴퓨터에 도달하는 여러 대의 컴퓨터랑 네트워크 기기를 거쳐서 상대방에게 배송됩니다.  
이러한 여러가지 길중에서 하나의 길을 결정하는 것이 네트워크 계층의 역할입니다.  

#### 링크 계층 (데이터 링크 계층, 네트워크 인터페이스 계층)  
네트워크에 접속하는 하드웨어적인 면을 다룬다. 운영체제가 하드웨어를 제어하기 때문에 디바이스 드라이버랑  
네트워크 인터페이스 카드를 포함한다. 그리고 케이블 등과 같이 물리적으로 보이는 부분도 포함한다.  

2. TCP/IP 통신의 흐름  
```
                                    클라이언트                                           서버
                                    
애플리케이션 계층                 HTTP 클라이언트                                       HTTP 서버
                                        ⇅                                                 ⇅

트랜스포트 계층                          TCP                                               TCP
                                         ⇅                                                 ⇅     

네트워크 계층                             IP                                                IP         
                                         ⇅                                                 ⇅  

링크 계층                               네트워크                                          네트워크
                                          ↑                                                 ↑
                                          ---------------------------------------------------
```  
TCP/IP로 통신을 할때는 계층을 순서대로 거쳐 상대와 통신한다. 이때 송신하는 측은 애플리케이션 계층부터 내려가고  
수신하는 측은 애플리케이션 계층으로 올라간다.  
HTTP를 예로 들면 송신측 클라이언트의 애플리케이션 계층(HTTP)에서 웹페이지를 요청을 지기한다.  
그다음에 트랜스포트 계층(TCP)에서는 애플리케이션 계층에서 받은 데이터(HTTP 메세지)를 통신하기 쉽게 조각내어 안내 번호와 포트번호를  
붙이고 네트워크 계층으로 전달한다.  
  
네트워크 계층(IP)에서는 수신지 MAC 주소를 추가해서 링크 계층에 전달한다.  
수신측 서버는 링크 계층에서 데이터를 받아들여 순서대로 위의 계층으로 전달하여 애플리케이션 계층까지 도달한다.  
애플리케이션 계층에 도달하게 되면 드디어 클라이언트가 발신했던 HTTP 요청 내용을 수신할 수 있다.  
  
```
                                    송신측                                              수신측
                                    계층을 통과할때마다                                  계층을 통과할때마다 
                                    해더 추가                                            헤더를 삭제

                                               HTTP 메세지
애플리케이션 계층                    HTTP 데이터                                         HTTP 데이터
                                        ↓                                                    ↑

                                                TCP 세그먼트
트랜스포트 계층                         TCP 해더                                           TCP 해더
                                      HTTP 데이터                                        HTTP 데이터
                                          ↓                                                  ↑     

                                                IP 데이터그램
네트워크 계층                            IP 해더                                            IP 해더    
                                        TCP 해더                                           TCP 해더
                                        HTTP 데이터                                         HTTP 데이터 
                                         ↓                                                    ↑  

                                                네트워크 프레임
링크 계층                               Ethernet 헤더                                      Ethernet 헤더
                                         IP 해더                                             IP 해더
                                        TCP 해더                                           TCP 해더
                                        HTTP 데이터                                         HTTP 데이터 
                                          ↑                                                 ↑
                                          ---------------------------------------------------
```    
각 계층을 거칠 때는 반드시 헤더로 불려지는 해당 계층마다 해당 계층에 필요한  
정보를 추가한다. 반대로 수진자 계층은 각 계층을 거칠때마다 반드시 해당 계층마다 사용한 데이터를 삭제한다.  
이렇게 정보를 감싸는 것은 **캡슐화**라고 부른다.  

## HTTP와 관계가 깊은 프로토콜은 IP/TCP/DNS  

1. 배송을 담당하는 IP  
IP(Internet Protocol)은 계층으로 말하자면 네트워크 계층에 해당된다. 실제 이름 그대로 인터넷을 활용하는  
거의 대부분의 시스템이 IP를 이용하고 있다. IP 와 IP 주소를 혼동하는 사람이 있는데 IP는 프로토콜의 명칭이다.  
IP의 역할은 개개의 팻킷을 상대방에게 전달하는 것이다. 전달과정에서 여러 요소가 있지만 그중에서도 IP 와 MAC 주소라는 요소가 중요하다.  
IP 주소는 각 노드에 부여된 주소(변경 가능)를 가리키고 MAC 주소는 각 네트워크 카드에 할당된 고유 주소이다(변경X).  
#### 통신은 ARP를 이용하여 MAC 주소에서 한다.  
IP 통신은 MAC 주소에 의존해서 통신을 한다.  
보통 여러대의 컴퓨터와 네트워크 기기를 중계해서 상대방에게 도착한다. 그렇게 중계하는 동안에는  
다음으로 중계할 곳의 MAC 주소를 사용하여 목적지를 찾아간다. 이떄 **ARP(Address Resolution Protocol)** 이라는 프로토콜이 사용된다.  
ARP는 주소를 해결하기 위한 프로토콜로 수신지의 IP 주소를 바탕으로 MAC 주소를 조사할 수 있다.  

## 그 누구도 인터넷 전체를 파악하고 있지는 않는다.  
목적지 까지 도달하기위해서 거쳐가는 컴퓨터와 라우터는 목적지에 도착하기 까지대략적인 목적지만 알고있다.  
마치 택배 배송과 흡사하다.  
결국, 어떤 컴퓨터나 네트워크 기기도 인터넷 전체를 상세하게 파악하고 있지는 못하다는 것이다.  

1. 신뢰성을 담당하는 TCP  
**TCP(Transfer COntrol Protocol)** 는 계층으로 말하면 트랜스포트층에 해당되는데,  
신뢰성 있는 바이트 스트림 서비스를 제공한다.  
바이트 스트림 서비스란, 용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 작게 분해하여 관리한느 것  
을 말하며, 신뢰성 있는 서비스는 상대방에게 보내느 서비스를 의미한다.  
즉, **대용량 데이터를 작게 분해해서 상대방에게 보내고, 정확하게 도착했는지 확인하는 역할을 담당 한다.**  

2. 상대방에게 확실하게 데이터를 보내자  
확실하게 데이터를 보내기 위해서 TCP는 **three way handshaking**이라는 방법을 사용한다.  
이방법은 패킷을 보내고 상대방이 해당 팻킷을 받았는지 확인하러 간다.  
먼저 송신측에서 최초 **SYN** 플래그로 상대방에게 접속함과 동시에 팻킷을 보내고,  
수신측에서 **SYN/ACK** 플래그로 송신측에 접속함과 동시에 팻킷을 수신한 사실을 전달,  
마지막으로 송신측에서 **ACK**플래그를 보내 팻킷 교환이 완료되었을 전달한다.  
위 과정중 통신이 끊어지면 TCP는 그와 동시에 다시 위와 같은 방법으로 패킷을 재전송 한다.  
```
                  SYN 패킷을 보낸다
      송신 측           -->             수신측         

                           SYN/ACK 
                           오케 나 받음!
                         ↙
                         
                         ACK 확인 교환 완료!!
                         ↘
```  

## 이름을 해결을 담당하는 DNS  

**DNS(Domain Name System)** 는 HTTP와 같이 애플리케이션 계층 시스템에서 도메인 이름 IP 주소 이름 확인을 제공한다.  
컴퓨터는 IP 주소와는 별도로 호스트 이름과 도메인 이름을 붙일 수 있다.  
예를 들어 'www.naver.com' 같이 적혀 있다.  
주로 사용자는 IP 주소 대신 이름을 이용하여 상대의 컴퓨터를 지정한다. 숫자를 나열하는 IP 주소를 지정하는 것보다  
영어나 숫자 등으로 표기해 컴퓨터의 이름을 지정하는 것이 좀더 친숙하지만 컴퓨터는 숫자 나열 방식을 더 선호한다.  
```
            친구야 나 www.naver.com 접속하고 싶어
    송신측                                                       DNS
                  IP 주소 알려줘~
            ------------------------------------------>     
            
                    IP 주소는 '1xx.xxx.xxx.xxx' 야
            <-------------------------------------------
            
            IP 주소 '1xx.xxx.xxx.xxx' 송신
           ----------------------------------------- 
                                                    ↘
                                                     네이버 웹페이지
                                                    
```  

## 각각 과 HTTP와의 관계

1. 클라이언트측 에서 특정 URL 주소의 IP주소를 DNS에게 요청
2. DNS에서 IP주소를 전달
3. 클라이언트 측에서 HTTP 담당 웹 서버에 보낼 HTTP 메세지 작성 (리소스 주세요~)
4. TCP 담당 에서 해당 HTTP 메세지를 패킷으로 분해
5. 상대방에게 패킷을 보냄
6. IP 담당 상대가 어디에 있는지 찾아 중계해 가면서 배송
7. 서버측 TCP 담당에서 상대방으로 부터 패킷을 수신
8. HTTP 담당 클라이언특 요청 내용을 처리
9. 처리 결과를 TCP/IP 통신으로 클라이언트에게 반환


## URI 와 URL  
URI보다 URL(Uniform Resource Locator)이 이숙하다. 웹브라우저 등으로 웹페이지를 표시하기 위해 입력하는 주소가 바로 URL이다.  
ex) www.google.com , www.naver.com ....  

1. URI 는 리소스 식별자  
**URI는 (Uniform Resource Identifies)** 의 약자로 각각의 단어가 다음와 같이 정의되어있다.  
* **Uniform** : 통일된 서식을 결정하는 것, 여러 가지 종류의 리소스 지정 방법을 같은 맥락에서 구별없이 취급할 수 있게 한다. 새로운 스키마(http:,ftp등) 도입을 용이하게함
* **Resource** : '식별 가능한 모든 것' 이라고 정의 document 파일 뿐만아니라 이미지 나 서비스 등 다른 것과 구별할 수 있는 것은 모두 리소스입니다. 또한 단일과 복수의 집하도 리소스로 파악할 수 있다.
* **Identifies** : 식별 가능한 것을 참조하는 오브젝트이며 식별자로 불립니다. 결국, URI는 스키마를 나타내는 리소스를 식별하기 위한 식별자입니다. 스키마는 리로스를 얻기위한 수단에 이름을 붙이는 방법이다.  
  
URI는 리소스를 식별하기 위해 문자열 전반을 나타내는데 비해 URL은 리소스의 장소를 나타낸다.  

2. URL 포맷  
```
http://user:pass@www.example.jp:80/dir/index.htm?uid=1#ch1
 
 http: 스키마
 user:pass : 자격 정보(크리덴셜)
 www.example.jp: 서버 주소
 :80  : 서버 포트
 dir/index.htm : 계층적 파일 패스
 uid=  : 쿼리 문자열 
 1#ch1  : 프래그먼트 식별자
```  
  
http:, https: 같은 스키마를 사용해서 리소스를 얻기위한 프로토콜을 지시한다.이때 대소문자는 무시되고 마지막 :(콜론)이 하나 붙는다.  
* **자격정보(크리덴셜)** : 서버로부터 리소스를 취득하려면 자격정보가 필요하다. 유저명과 패스워드를 지정할 수 있다.(옵션)
* **서버주소** : 주소는 'www.example234.jp' 등과 같은 DNS 이름이나 '192.xxx.x.x.x'와 같은 IPv4 주소나 Ipv6주소로 지정합니다.(필수)
* **서버 포트** : 서버의 접속 대상이 되는 네트워크 포트 번호를 지정합니다(옵션)
* **계층적 파일패스** : 특정 리소스를 식별하기 위해서 서버상의 파일패스를 지정합니다.
* **쿼리 문자열** : 파일 패스로 지정된 리소스에 임의의 파라미터를 넘겨주기 위해 쿼리 문자열을 사용합니다.(옵션)
* **프래그먼트 식별자** : 주로 취득한 리소스에서 서브 리소스를 가리키기 위해서 프래그먼트 식별자가 사용된다(옵션)


