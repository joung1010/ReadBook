## 메일과 인터넷을 지원하는 서버

1. 메일과 인터넷의 등장인물
메일은 송신을 담당하는 **SMT 서버 와 DNS 서버**, 수신을 담당하는 **POP3 서버**  
인터넷의 경우는 **DNS, Proxy, Web, SSL, FTP**등의 서버로 구성  
```
메일 : SMTP 서버(메일 송신), POP3 서버(메일 수신), IMAP 서버(외부에서의 메일 열람),
       DNS 서버(도메인과 IP 주소 관리), Proxy 서버(인터넷 통신 대행), SSL 서버(통신 암호화)
       
인터넷 : DNS 서버(도메인과 IP 주소 관리), Proxy 서버(인터넷 통신 대행), SSL 서버(통신 암호화)       
        Web 서버(웹 서비스 제공), FTP 서버(파일 전송및 공유)
```

## 메일을 보내고 받는 서버

1. SMTP 서버의 역할  
**SMTP 서버**(Simple Mail Transfer Protocol)는 메일을 보내는 프로토콜을 사용한다.
메일을 보내고 받는 프로토콜이 다르므로 서버도 각각 따로 있다.  
```
      송신 측 기업                               수신 측 기업
        
        DNS 서버
           ↑  2. 도메인명에서 상대의 SMPT 서버를
           |      DNS 서버에 문의 한다.
           |
           
        SMTP 서버       -------------->           SMTP 서버
        
           ↑               3. 상대의 SMTP 서버에
           |                  메일을 보낸다.
           |
           | 1. SMTP 서버에 메일 데이터를 보낸다
          사용자 A
```
SMTP 서버는 메일 주소의 @ 뒤에 적혀 있는 도메인명을 확인해서 DNS 서버에 IP주소를 문의한다.  
IP 주소를 확인 했으면 메일 데이터를 보냅니다.  
메일을 보낼 때 메일 소프트웨어에 설정된 사용자 이름과 암호로 인증하고  
실행하는 절차는 SMTP AUTH 등으로 부른다.  

2. POP3 서버의 역할
**POP3 서버**(Popst Office Protocol Version 3)는 메일을 받는 프로토콜을 이용한다.  
앞에서 SMTP 서버는 서버에서 보내는 쪽 SMTP 서버와 받는 쪽 창구가 되는 SMTP 서버가 있습니다.  
```
  송신 측 기업                             수신 측 기업
  
                                  1. SMTP 서버를 경유해 메일이 POP3 서버에 수시로 도달한다.

    SMTP 서버           ----->        SMTP 서버     ------->          POP3 서버
                                                                          |  
                                                    정기적으로 문의        |
                                                    <-------              |     2. 클라이언트가 문의
                                                                          |        하는 계정 이름, 암호가
                                                                          ↓      맞으면 편지함에 저장되어
                                                                                 있는 메일을 보낸다.
                                                                        사용자
```  
보내는 쪽 SMTP 서버에서 받는 쪽 기업의 SMTP 서버로 SMTP 서버 간의 통신에 의해 메일 데이터가 도달한다.  
그리고 받는 쪽 기업의 SMTP 서버에 사용자가 자기 앞으로 온 메일을 가지러 갈 때 POP3 서버를 이용한다.  
따라서, POP3 서버는 전송 명령이 있으면 곧바로 상대방의 SMTP 서버에 데이터를 보내지만,  
POP3 서버는 메일이 도착했는지 메일 소프트웨어에 설정된 간격으로 정기적으로 확인하는 처리를 한다는 차이도 있다.  

3. SSL로 암호화  
사용자는 메일 소프트웨어에 설정ㅎ나 POP3 서버에 엑세스해서, 자신의 편지함에 도착한 메일 데이터를 받으러간다.  
이때 사용자 이름과 암호에 의한 인증이 필요하다.  
```
                              POP3 서버
                                |   ↑
                                |   | * 사용자 이름    (사용자가 편지함에 저장된
                                |   | * 암호            메일 데이터를 받으러 갈때, 사용자 이름, 암호로
                                ↓   |                   인증을 받는다)

                          -------------
                         | *사용자 이름|
                         | * 암호      |  SSL 로 통신하면, 터널로 정보를 보호할 수 있다.
                         ---------------  개인 단말이라면 메일 설정의 보안 종류에서 기본적으로 없음 으로 되어 있는 부분을 SSL/TLS 등
                                          으로 변경한다.
```  
개인이 메일 수신 설정을 할 때 중요한 것은  
**메일을 가져오는 정기적인 타이밍과 수신한 메일을 서버에서 삭제하는 타이밍일**것이다.  

## 웹 서비스 제공에 꼭 필요한 서버

1. 웹 서버로 가는 길  
**웹 서버**는 웹 서비스를 제공하는 서버이다. 일반적으로 브라우저를 이용해  
웹 사이트를 보는데, 이때 **웹 사이트의 콘테츠를 제공**하는 것이 웹 서버이다.  
하지만, 클라이언트 단말의 브라우저에서 직접 웹 서버로 연결되는 것은 아니다.  
```
                                      웹 서버로 가는 길

  기업이나 단체의 네트워크                                       웹 서비스 제공자의 네트워크
                                                                        SSL 서버
      DNS 서버 URL을 IP 주소로 변환                                           ↖
        ↖↘                                                                     ↘ 
              Proxy 서버    -------------------------------->   Proxy 서버    ⇆   웹서버
              ↗                 조정 후에 인터넷으로                                
        클라이언트 PC              
    
```  
클라이언트 PC 브라우저의 요청을 바탕으로 Proxy 서버를 경유 하고 있다.  
DNS 서버에서 URL을 IP 주소로 변환해 주면 조정을 완료하고, 인터넷을 지나  
목표로 하는 상대방 네트워크에 들어가 웹 서버에 도달합니다.  

2. 웹 서버의 메일 소프트웨어에서의 설정  
웹 서버는 브라우저의 데이터나 처리 요청에 대해서 **HTTP**(Hyper Text Transfer Protocol) 프로토콜에 따라 대응한다.  
```
                                 웹 서버의 처리

                        * 목적지 URL
                        * 메소드(get,post,put,delete 등)
  브라우저            ----------------------------->            웹 서버
                     <-----------------------------             * Window : 서버역할 선택을 웹서버(IIS)를 선택
                        * 요구된 처리를 반환                     * Linux :  Apache, nignx 등의 서버를 이용


일반적인 웹 사이트의 의미: 홈페이지 등 웹 페이지의 집합을 가리키는 말로 사용
IIS에서 웹 사이트의 의미 : 마이크로소프트의 IIS에서 작성한 콘테츠를 공개하는 단위를 뜻하며, 개발자는 이 의미로 사용하는 경우가 많다.

```  
웹 서버의 구조에 관해서는 지금까지처럼 사용자 혹은 클라이언트 중심으로 생각하면 이해하기 쉽다.  
도입을 검토할 때는 **서비스를 제공하는 쪽 시점**에서 생각한다.  

## 도메인과 IP 주소의 연결

1. DNS의 역할  
**DNS**(Domain Name System)은 지금까지도 여러 번 등장했던 것처럼 **도메인명과 IP 주소를 연결해 주는 기능**을 제공한다.  
* 메일 주소 @ 뒤의 도메인명을 IP 주소로 변경한다.  
* 브라우저에서 입력된 도메인명을 IP 주소로 변환한다.  
평소에는 DNS의 존재를 의식하지 못하지만, 메일에서도 웹에서 활약하는 매우 중요한 기능을 제공한다.  
DNS 서버는 크게 캐시 서버와 콘테츠 서버로 나눌 수 있다.  
```
        
            대상 도메인명의 IP                         대상 도메인명의 IP
            주소가 캐시에 있으면 캐시에서 응답           주소가 캐시에 없으면 콘테츠에 문의
    사용자       ------->                            ------->
                <-------      캐시 서버              <-------       DNS 콘테츠 서버
                                                        콘텐츠 서버에서 캐시 서버로
                                                        응답

DNS 캐시 서버 : 클라이언트 요청에 대응
DNS 콘텐츠 서버 : 대응표를 가지고 있어 외부 DNS에도 대응
```  

2. 시스템 규모에 따라 역할이 바뀐다.  
DNS가 중요한 역할을 하는 만큼, **사용자 수와 네트워크 시스템의 규모에 따라서 존재 자체가 바뀐다.**  
소규모 기업이라면 별도의 DNS 서버 대신 메일이나 웹 서버 안에 기능으로써 들어갑니다.
대기업 이라면 메일이나 웹 사이트로의 접속량이 방대하므로, DNS 서버를 설치할 뿐만 아니라,  
메일용과 웹용으로 나누고 거기서 다시 다중화하는 일도 있다.

